(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{10:function(e,t,a){e.exports=a(16)},15:function(e,t,a){},16:function(e,t,a){"use strict";a.r(t);var r,n=a(0),s=a.n(n),i=a(9),c=a.n(i),o=a(3),u=a(4),h=a(6),g=a(5),l=a(1),m=a(7),f=(a(15),a(2)),p=(r={},Object(f.a)(r,0,{type_1:[[0,1,0],[1,1,1]],type_2:[[1,0],[1,1],[1,0]],type_3:[[1,1,1],[0,1,0]],type_4:[[0,1],[1,1],[0,1]]}),Object(f.a)(r,1,{type_1:[[1,1,1,1]],type_2:[[1],[1],[1],[1]]}),Object(f.a)(r,2,{type_1:[[1,1,1],[0,0,1]],type_2:[[0,1],[0,1],[1,1]],type_3:[[1,0,0],[1,1,1]],type_4:[[1,1],[1,0],[1,0]]}),Object(f.a)(r,3,{type_1:[[1,1,0],[0,1,1]],type_2:[[0,1],[1,1],[1,0]]}),Object(f.a)(r,4,{type_1:[[0,1,1],[1,1,0]],type_2:[[1,0],[1,1],[0,1]]}),Object(f.a)(r,5,{type_1:[[1,1],[1,1]]}),r),v=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(h.a)(this,Object(g.a)(t).call(this,e))).state={opacity:1},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.interval=setInterval((function(){e.setState({opacity:e.state.opacity-.05})}),100)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){return s.a.createElement("div",{className:"scoreInc",style:{opacity:"".concat(this.state.opacity)}},"+",this.props.scoreInc)}}]),t}(s.a.Component),y=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(h.a)(this,Object(g.a)(t).call(this,e))).state={gameMap:[[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0]],figure:[],formsOfFigure:[],currenFormIndex:0,nextFigure:[],nextFormOfFigure:[],nextFormIndex:0,x:1,y:0,pressMoveFigure:!0,score:0,scoreInc:0,speed:1e3,gameOver:!1,currentSpeedRange:0,menu:!1,pause:!1},a.timePlay=null,a.myDiv=s.a.createRef(),a.rangeSpeed=s.a.createRef(),a.drawingMap=a.drawingMap.bind(Object(l.a)(a)),a.drawingFigureOnMap=a.drawingFigureOnMap.bind(Object(l.a)(a)),a.moveFigure=a.moveFigure.bind(Object(l.a)(a)),a.changeFigure=a.changeFigure.bind(Object(l.a)(a)),a.getFigure=a.getFigure.bind(Object(l.a)(a)),a.clear=a.clear.bind(Object(l.a)(a)),a.changeForm=a.changeForm.bind(Object(l.a)(a)),a.check=a.check.bind(Object(l.a)(a)),a.pressPause=a.pressPause.bind(Object(l.a)(a)),a.finish=a.finish.bind(Object(l.a)(a)),a.drawMenu=a.drawMenu.bind(Object(l.a)(a)),a.speedChange=a.speedChange.bind(Object(l.a)(a)),a.drawingNext=a.drawingNext.bind(Object(l.a)(a)),a.newGame=a.newGame.bind(Object(l.a)(a)),a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"drawMenu",value:function(){}},{key:"check",value:function(e){for(var t=[this.state.x,this.state.y],a=t[0],r=t[1],n=[this.state.figure[0].length,this.state.figure.length],s=n[0],i=n[1],c=[this.state.gameMap[0].length,this.state.gameMap.length],o=c[0],u=c[1],h=this.state.gameMap,g=r;g<i+r;g++)for(var l=a;l<s+a;l++)0===r&&2===h[g][l]&&this.finish();if("ArrowRight"===e){a+=1;for(var m=r;m<i+r;m++)for(var f=a;f<s+a;f++)if((f===o||2===h[m][f])&&1===h[m][f-1])return!1}if("ArrowLeft"===e){a-=1;for(var p=r;p<i+r;p++)for(var v=a;v<s+a;v++)if((-1===v||2===h[p][v])&&1===h[p][v+1])return!1}if("ArrowUp"===e){var y=this.state.currenFormIndex;y<this.state.formsOfFigure.length-1?y++:y=0;for(var d=[this.state.formsOfFigure[y][0].length,this.state.formsOfFigure[y].length],w=d[0],F=d[1],b=r;b<F+r;b++)for(var M=a;M<w+a;M++)if(b===u||M===o||2===h[b][M])return!1}if("ArrowDown"===e)for(var O=r+=1;O<i+r;O++)for(var k=a;k<s+a;k++)if(1===this.state.figure[O-r][k-a]&&(O===u||2===h[O][k]))return!1;return!0}},{key:"finish",value:function(){clearInterval(this.timePlay),this.setState({pressMoveFigure:!1,gameOver:!0})}},{key:"newGame",value:function(){var e=this;this.state.gameMap.forEach((function(e,t,a){a[t].forEach((function(e,t,a){a[t]=0}))})),this.setState({pressMoveFigure:!0,gameOver:!1,y:0,x:4,score:0},(function(){e.getFigure(),clearInterval(e.timePlay),e.timePlay=setInterval((function(){return e.moveFigure({key:"ArrowDown"})}),e.state.speed),e.myDiv.current.focus()}))}},{key:"changeForm",value:function(){var e=this,t=this.state.currenFormIndex;t<this.state.formsOfFigure.length-1?t++:t=0,this.setState({currenFormIndex:t}),this.setState({figure:this.state.formsOfFigure[t]},(function(){e.drawingFigureOnMap()}))}},{key:"clear",value:function(e){var t=[this.state.x,this.state.y],a=t[0],r=t[1],n=[this.state.figure[0].length,this.state.figure.length],s=n[0],i=n[1];if("ArrowRight"===e)for(var c=r;c<i+r;c++)2!=this.state.gameMap[c][a-1]&&(this.state.gameMap[c][a-1]=0);if("ArrowLeft"===e)for(var o=r;o<i+r;o++)2!=this.state.gameMap[o][a+s]&&(this.state.gameMap[o][a+s]=0);if("ArrowUp"===e)for(var u=[this.state.x,this.state.y],h=u[0],g=u[1],l=[this.state.figure[0].length,this.state.figure.length],m=l[0],f=l[1],p=g;p<f+g;p++)for(var v=h;v<m+h;v++)2!=this.state.gameMap[p][v]?this.state.gameMap[p][v]=0:this.state.gameMap[p][v]=2;if("ArrowDown"===e)for(var y=a;y<s+a;y++)2!=this.state.gameMap[r-1][y]?this.state.gameMap[r-1][y]=0:this.state.gameMap[r-1][y]=2;this.setState({gameMap:this.state.gameMap})}},{key:"getFigure",value:function(){var e=this,t=Math.trunc(Math.random()*Object.keys(p).length),a=Math.trunc(Math.random()*(Object.keys(p[t]).length-1)),r=[];for(var n in p[t])r.push(p[t][n]);this.setState({figure:this.state.nextFigure,formsOfFigure:this.state.nextFormOfFigure,formIndex:this.state.nextFormIndex},(function(){e.setState({nextFigure:r[a],nextFormIndex:a,nextFormOfFigure:r})}))}},{key:"drawingFigureOnMap",value:function(){for(var e=[this.state.x,this.state.y],t=e[0],a=e[1],r=[this.state.figure[0].length,this.state.figure.length],n=r[0],s=r[1],i=a;i<s+a;i++)for(var c=t;c<n+t;c++)2===this.state.gameMap[i][c]?this.state.gameMap[i][c]=2:this.state.gameMap[i][c]=this.state.figure[i-a][c-t];this.setState({gameMap:this.state.gameMap})}},{key:"moveFigure",value:function(e){var t=this,a=this.state.x,r=this.state.y;switch(!1===this.state.gameOver&&this.myDiv.current.focus(),e.key){case"ArrowRight":!0===this.check("ArrowRight")&&this.setState({x:a+1},(function(){t.drawingFigureOnMap(),t.clear("ArrowRight")}));break;case"ArrowLeft":!0===this.check("ArrowLeft")&&this.setState({x:a-1},(function(){t.drawingFigureOnMap(),t.clear("ArrowLeft")}));break;case"ArrowUp":!0===this.check("ArrowUp")&&(this.clear("ArrowUp"),this.changeForm());break;case"ArrowDown":!0===this.check("ArrowDown")?this.setState({y:r+1},(function(){t.drawingFigureOnMap(),t.clear("ArrowDown")})):this.changeFigure()}}},{key:"changeFigure",value:function(){var e=this,t=[this.state.x,this.state.y],a=t[0],r=t[1],n=[this.state.figure[0].length,this.state.figure.length],s=n[0],i=n[1],c=[this.state.gameMap[0].length,this.state.gameMap.length],o=c[0],u=c[1],h=[this.state.gameMap,this.state.figure],g=h[0],l=h[1],m=0,f=0;clearInterval(this.timePlay),this.setState({pressMoveFigure:!1});for(var p=r;p<i+r;p++)for(var v=a;v<s+a;v++)1===l[p-r][v-a]&&(g[p][v]=2);for(var y=0;y<u;y++)if(m=0,g[y].forEach((function(e){return 2===e&&m++})),m===o){f+=10;for(var d=y;d>0;d--)for(var w=0;w<o;w++)g[d][w]=g[d-1][w]}this.setState({score:this.state.score+f,scoreInc:0},(function(){e.setState({scoreInc:f}),e.setState({pressMoveFigure:!0}),e.state.y=0,e.state.x=4,e.getFigure(),e.timePlay=setInterval((function(){return e.moveFigure({key:"ArrowDown"})}),e.state.speed)}))}},{key:"drawingMap",value:function(){return this.state.gameMap.map((function(e,t){return s.a.createElement("div",{key:"y=".concat(t)},e.map((function(e,t,a){return s.a.createElement("span",{className:0===e?"block emty":"block filled",key:"x=".concat(t)})})))}))}},{key:"drawingNext",value:function(){return this.state.nextFigure.map((function(e,t){return s.a.createElement("div",{key:"y=".concat(t),style:{margin:"-4px","text-align":"center"}},e.map((function(e,t,a){return s.a.createElement("span",{className:0===e?"block":"block filled",key:"x=".concat(t)})})))}))}},{key:"pressPause",value:function(){var e=this;this.setState({pause:!0!==this.state.pause},(function(){!0===e.state.pause?(e.setState({pressMoveFigure:!1}),clearInterval(e.timePlay)):(e.setState({pressMoveFigure:!0}),e.timePlay=setInterval((function(){return e.moveFigure({key:"ArrowDown"})}),e.state.speed))}))}},{key:"speedChange",value:function(e){var t=this;clearInterval(this.timePlay),this.setState({currentSpeedRange:this.rangeSpeed.current.value},(function(){t.setState({speed:1e3-t.state.currentSpeedRange},(function(){t.state.pause||(t.timePlay=setInterval((function(){return t.moveFigure({key:"ArrowDown"})}),t.state.speed))}))}))}},{key:"componentDidMount",value:function(){var e=this,t=Math.trunc(Math.random()*Object.keys(p).length),a=Math.trunc(Math.random()*(Object.keys(p[t]).length-1)),r=[];for(var n in p[t])r.push(p[t][n]);this.setState({nextFigure:r[a],nextFormIndex:a,nextFormOfFigure:r},(function(){e.getFigure(),e.timePlay=setInterval((function(){return e.moveFigure({key:"ArrowDown"})}),e.state.speed),e.myDiv.current.focus()}))}},{key:"render",value:function(){return s.a.createElement("div",{className:"main"},!0===this.state.gameOver?s.a.createElement("div",{style:{"text-align":"center"}},s.a.createElement("h1",null,"Game over!"),s.a.createElement("h2",null,"Your score: ",this.state.score),s.a.createElement("button",{className:"btn-newGame",onClick:this.newGame},"New game")):s.a.createElement("div",{onKeyDown:!0===this.state.pressMoveFigure&&this.moveFigure,ref:this.myDiv,tabIndex:"-1",className:"game"},s.a.createElement("div",{className:"map",style:!0===this.state.pause?{opacity:"0.4"}:{}},this.drawingMap(),this.state.scoreInc>0&&s.a.createElement(v,{scoreInc:this.state.scoreInc}),!0===this.state.pause&&s.a.createElement("img",{className:"pause",src:"/pause.png"})),s.a.createElement("div",{className:"stat"},s.a.createElement("h1",null,"Score: ",this.state.score),s.a.createElement("div",{className:"nextFigure"},s.a.createElement("p",null,"Next figure:")," ",this.drawingNext()),s.a.createElement("div",{className:"currentSpeed"},s.a.createElement("p",null,"Current speed: ",1e3===this.state.speed?"1s":this.state.speed+"ms"),s.a.createElement("input",{type:"range",onKeyPress:function(){return!1},min:"0",max:"950",className:"slider",value:this.state.currentSpeedRange,ref:this.rangeSpeed,onChange:this.speedChange})),s.a.createElement("button",{onClick:this.pressPause},!1===this.state.pause?"Pause":"Resume"))))}}]),t}(s.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(s.a.createElement(y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[10,1,2]]]);
//# sourceMappingURL=main.bff5513c.chunk.js.map